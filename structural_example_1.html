<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MAST: Extension of bar</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MAST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structural_example_1.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Extension of bar </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example solves an axial bar extension problem.</p>
<p>Initialize libMesh library. </p><div class="fragment"><div class="line">libMesh::LibMeshInit init(argc, argv);</div></div><!-- fragment --><p> Create Mesh object on default MPI communicator and generate a line mesh (5 elements, 10 units long). Note that in libMesh, all meshes are parallel by default in the sense that the equations on the mesh are solved in parallel by PETSc. A "ReplicatedMesh" is one where all MPI processes have the full mesh in memory, as compared to a "DistributedMesh" where the mesh is "chunked" up and distributed across processes, each having their own piece. </p><div class="fragment"><div class="line">libMesh::ReplicatedMesh mesh(init.comm());</div><div class="line">libMesh::MeshTools::Generation::build_line(mesh, 5, 0.0, 10.0);</div><div class="line">mesh.print_info();</div><div class="line">mesh.boundary_info-&gt;print_info();</div></div><!-- fragment --><p> Create EquationSystems object, which is a container for multiple systems of equations that are defined on a given mesh. </p><div class="fragment"><div class="line">libMesh::EquationSystems equation_systems(mesh);</div></div><!-- fragment --><p> Add system of type <a class="el" href="class_m_a_s_t_1_1_nonlinear_system.html" title="This class implements a system for solution of nonlinear systems. ">MAST::NonlinearSystem</a> (which wraps libMesh::NonlinearImplicitSystem) to the EquationSystems container. We name the system "structural" and also get a reference to the system so we can easily reference it later. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_nonlinear_system.html">MAST::NonlinearSystem</a> &amp; system = equation_systems.add_system&lt;<a class="code" href="class_m_a_s_t_1_1_nonlinear_system.html">MAST::NonlinearSystem</a>&gt;(<span class="stringliteral">&quot;structural&quot;</span>);</div></div><!-- fragment --><p> Create a finite element type for the system. Here we use first order Lagrangian-type finite elements. </p><div class="fragment"><div class="line">libMesh::FEType fetype(libMesh::FIRST, libMesh::LAGRANGE);</div></div><!-- fragment --><p> Initialize the system to the correct set of variables for a structural analysis. In libMesh this is analogous to adding variables (each with specific finite element type/order to the system for a particular system of equations. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_structural_system_initialization.html">MAST::StructuralSystemInitialization</a> structural_system(system,</div><div class="line">                                                       system.name(),</div><div class="line">                                                       fetype);</div></div><!-- fragment --><p> Initialize a new structural discipline using equation_systems. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_physics_discipline_base.html">MAST::PhysicsDisciplineBase</a> discipline(equation_systems);</div></div><!-- fragment --><p> Create and add boundary conditions to the structural system. A Dirichlet BC fixes the left end of the bar. This definition uses the numbering created by the libMesh mesh generation function. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_dirichlet_boundary_condition.html">MAST::DirichletBoundaryCondition</a> dirichlet_bc;</div><div class="line">dirichlet_bc.<a class="code" href="class_m_a_s_t_1_1_dirichlet_boundary_condition.html#a7fe64cf8537780d8b6c89294e3dc3cde">init</a>(0, structural_system.vars());</div><div class="line">discipline.add_dirichlet_bc(0, dirichlet_bc);</div><div class="line">discipline.init_system_dirichlet_bc(system);</div></div><!-- fragment --><p> Initialize the equation system since we now know the size of our system matrices (based on mesh, element type, variables in the structural_system) as well as the setup of dirichlet boundary conditions. This initialization process is basically a pre-processing step to preallocate storage and spread it across processors. </p><div class="fragment"><div class="line">equation_systems.init();</div><div class="line">equation_systems.print_info();</div></div><!-- fragment --><p> Create parameters. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_parameter.html">MAST::Parameter</a> thickness_y(<span class="stringliteral">&quot;thy&quot;</span>, 0.06);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_parameter.html">MAST::Parameter</a> thickness_z(<span class="stringliteral">&quot;thz&quot;</span>, 0.02);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_parameter.html">MAST::Parameter</a> E(<span class="stringliteral">&quot;E&quot;</span>, 72.0e9);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_parameter.html">MAST::Parameter</a> nu(<span class="stringliteral">&quot;nu&quot;</span>, 0.33);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_parameter.html">MAST::Parameter</a> zero(<span class="stringliteral">&quot;zero&quot;</span>, 0.0);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_parameter.html">MAST::Parameter</a> pressure(<span class="stringliteral">&quot;p&quot;</span>, 2.0e4);</div></div><!-- fragment --><p> Create ConstantFieldFunctions used to spread parameters throughout the model. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_constant_field_function.html">MAST::ConstantFieldFunction</a> thy_f(<span class="stringliteral">&quot;hy&quot;</span>, thickness_y);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_constant_field_function.html">MAST::ConstantFieldFunction</a> thz_f(<span class="stringliteral">&quot;hz&quot;</span>, thickness_z);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_constant_field_function.html">MAST::ConstantFieldFunction</a> E_f(<span class="stringliteral">&quot;E&quot;</span>, E);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_constant_field_function.html">MAST::ConstantFieldFunction</a> nu_f(<span class="stringliteral">&quot;nu&quot;</span>, nu);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_constant_field_function.html">MAST::ConstantFieldFunction</a> hyoff_f(<span class="stringliteral">&quot;hy_off&quot;</span>, zero);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_constant_field_function.html">MAST::ConstantFieldFunction</a> hzoff_f(<span class="stringliteral">&quot;hz_off&quot;</span>, zero);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_constant_field_function.html">MAST::ConstantFieldFunction</a> pressure_f(<span class="stringliteral">&quot;pressure&quot;</span>, pressure);</div></div><!-- fragment --><p> Initialize load. TODO - Switch this to a concentrated/point load on the right end of the bar. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_boundary_condition_base.html">MAST::BoundaryConditionBase</a> right_end_pressure(<a class="code" href="namespace_m_a_s_t.html#aad73c2614379df860d42999aa0811e14aa4f09fd4e780fcff93f4362894b8b4c8">MAST::SURFACE_PRESSURE</a>);</div><div class="line">right_end_pressure.add(pressure_f);</div><div class="line">discipline.add_side_load(1, right_end_pressure);</div></div><!-- fragment --><p> Create the material property card ("card" is NASTRAN lingo) and the relevant parameters to it. An isotropic material needs elastic modulus (E) and Poisson ratio (nu) to describe its behavior. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_isotropic_material_property_card.html">MAST::IsotropicMaterialPropertyCard</a> material;</div><div class="line">material.<a class="code" href="class_m_a_s_t_1_1_function_set_base.html#a1c62b64f2321709d3f238290040275db">add</a>(E_f);</div><div class="line">material.<a class="code" href="class_m_a_s_t_1_1_function_set_base.html#a1c62b64f2321709d3f238290040275db">add</a>(nu_f);</div></div><!-- fragment --><p> Create the section property card. Attach all property values. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_solid1_d_section_element_property_card.html">MAST::Solid1DSectionElementPropertyCard</a> section;</div><div class="line">section.<a class="code" href="class_m_a_s_t_1_1_function_set_base.html#a1c62b64f2321709d3f238290040275db">add</a>(thy_f);</div><div class="line">section.<a class="code" href="class_m_a_s_t_1_1_function_set_base.html#a1c62b64f2321709d3f238290040275db">add</a>(thz_f);</div><div class="line">section.<a class="code" href="class_m_a_s_t_1_1_function_set_base.html#a1c62b64f2321709d3f238290040275db">add</a>(hyoff_f);</div><div class="line">section.<a class="code" href="class_m_a_s_t_1_1_function_set_base.html#a1c62b64f2321709d3f238290040275db">add</a>(hzoff_f);</div></div><!-- fragment --><p> Specify a section orientation point and add it to the section. </p><div class="fragment"><div class="line"><a class="code" href="mast__data__types_8h.html#abc8ad2bc4221d7400e5306159e28e588">RealVectorX</a> orientation = RealVectorX::Zero(3);</div><div class="line">orientation(1) = 1.0;</div><div class="line">section.<a class="code" href="class_m_a_s_t_1_1_element_property_card1_d.html#a82f8c6cee367fbe4d3e4796d4d78ac72">y_vector</a>() = orientation;</div></div><!-- fragment --><p> Attach material to the card. </p><div class="fragment"><div class="line">section.<a class="code" href="class_m_a_s_t_1_1_solid1_d_section_element_property_card.html#a0c7b6391adfbf8add847d6654302ed73">set_material</a>(material);</div></div><!-- fragment --><p> Initialize the section and specify the subdomain in the mesh that it applies to. </p><div class="fragment"><div class="line">section.<a class="code" href="class_m_a_s_t_1_1_solid1_d_section_element_property_card.html#af178105164672584bc316823ebf2e4e0">init</a>();</div><div class="line">discipline.set_property_for_subdomain(0, section);</div></div><!-- fragment --><p> Create nonlinear assembly object and set the discipline and structural_system. Create reference to system. </p><div class="fragment"><div class="line"><a class="code" href="class_m_a_s_t_1_1_nonlinear_implicit_assembly.html">MAST::NonlinearImplicitAssembly</a> assembly;</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_structural_nonlinear_assembly_elem_operations.html">MAST::StructuralNonlinearAssemblyElemOperations</a> elem_ops;</div><div class="line">assembly.<a class="code" href="class_m_a_s_t_1_1_assembly_base.html#a0644e12cd53adc64d9b7e027becc08b5">set_discipline_and_system</a>(discipline, structural_system);</div><div class="line">elem_ops.<a class="code" href="class_m_a_s_t_1_1_assembly_elem_operations.html#affb65f707a71004834a34987f14749c5">set_discipline_and_system</a>(discipline, structural_system);</div><div class="line"><a class="code" href="class_m_a_s_t_1_1_nonlinear_system.html">MAST::NonlinearSystem</a>&amp; nonlinear_system = assembly.<a class="code" href="class_m_a_s_t_1_1_assembly_base.html#abdff8292b4929a3aa7276c639a8d05e3">system</a>();</div></div><!-- fragment --><p> Zero the solution before solving. </p><div class="fragment"><div class="line">nonlinear_system.solution-&gt;zero();</div></div><!-- fragment --><p> Solve the system and print displacement degrees-of-freedom to screen. </p><div class="fragment"><div class="line">nonlinear_system.<a class="code" href="class_m_a_s_t_1_1_nonlinear_system.html#aaaed1f33d18591f0f380516e1e2fbb8c">solve</a>(elem_ops, assembly);</div><div class="line">nonlinear_system.solution-&gt;print_global();</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="TutorialsPage.html">Tutorials for MAST</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
